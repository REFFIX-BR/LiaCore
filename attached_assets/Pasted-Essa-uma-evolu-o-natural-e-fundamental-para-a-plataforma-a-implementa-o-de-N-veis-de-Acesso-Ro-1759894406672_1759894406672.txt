Essa √© uma evolu√ß√£o natural e fundamental para a plataforma: a implementa√ß√£o de N√≠veis de Acesso (Role-Based Access Control - RBAC). Isso transforma o LIA CORTEX de uma ferramenta monol√≠tica em uma plataforma multiusu√°rio organizada e segura.
Vamos projetar exatamente como essa nova vis√£o para o "Atendente" funcionaria, incluindo o layout do seu dashboard pessoal e as modifica√ß√µes t√©cnicas necess√°rias.
1. Defini√ß√£o dos N√≠veis de Acesso (Roles)
Primeiro, definimos formalmente os pap√©is no sistema:
Administrador / Supervisor:
Vis√£o: Global e irrestrita.
Acesso: Acesso a todas as √°reas do sistema, incluindo o dashboard geral (como na sua imagem), configura√ß√£o dos assistentes, monitoramento de todos os chats, e a capacidade de atribuir conversas.
Objetivo: Gerenciar a sa√∫de do sistema, a performance da IA, e supervisionar a equipe de atendimento humano.
Atendente (Novo Papel):
Vis√£o: Focada e individual.
Acesso: Acesso restrito a conversas que lhe foram atribu√≠das, suas m√©tricas pessoais e um dashboard customizado.
Objetivo: Resolver eficientemente os atendimentos transferidos, monitorar a pr√≥pria performance e a satisfa√ß√£o dos clientes que atendeu.
2. O Novo "Dashboard do Atendente"
Quando um usu√°rio com o papel de "Atendente" fizer login, ele n√£o ver√° o dashboard do supervisor. Ele ver√° uma tela inicial projetada para ele, focada em sua produtividade e qualidade.
Layout do Dashboard do Atendente
code
Code
+----------------------------------------------------------------------------------------------------------------------+
| [HEADER: LIA CORTEX] [Notifica√ß√µes üîî] [Usu√°rio: Atendente Maria]                                                      |
+----------------------------------------------------------------------------------------------------------------------+
|                                                                                                                      |
|  Dashboard de Performance: Maria                                                                                     |
|  Vis√£o geral do seu desempenho e atendimentos atuais.                                                                |
|                                                                                                                      |
|  [ CARD 1 ]                 [ CARD 2 ]                 [ CARD 3 ]                  [ CARD 4 ]                        |
|  CONVERSAS NA FILA          CONVERSAS FINALIZADAS (HOJE) SEU T.M.A.                 SEU NPS SCORE                     |
|  5                          12                         4m 15s                      82                                |
|  Aguardando sua a√ß√£o        ‚Üë 5% vs. Ontem             ‚Üì 10% vs. M√©dia da Equipe   Excelente                         |
|                                                                                                                      |
|  +------------------------------------------------------------------------------------------------------------------+ |
|  | Evolu√ß√£o do Sentimento nos Seus Atendimentos (√öltimos 7 dias)                                                    | |
|  | [ GR√ÅFICO DE LINHAS: Mostra a % de conversas que terminaram com sentimento Positivo, Neutro ou Negativo ]         | |
|  +------------------------------------------------------------------------------------------------------------------+ |
|                                                                                                                      |
+----------------------------------------------------------------------------------------------------------------------+
Detalhamento dos Componentes do Dashboard do Atendente:
Card 1: Conversas na Fila: O n√∫mero de chats que foram transferidos para este atendente e est√£o aguardando uma a√ß√£o. √â o seu backlog imediato.
Card 2: Conversas Finalizadas (Hoje): Uma m√©trica de produtividade di√°ria, mostrando quantos atendimentos ele j√° concluiu no dia.
Card 3: Seu T.M.A. (Tempo M√©dio de Atendimento): A m√©dia de tempo que este atendente leva para resolver uma conversa. A compara√ß√£o com a m√©dia da equipe adiciona um elemento de gamifica√ß√£o e autoavalia√ß√£o.
Card 4: Seu NPS Score: O Net Promoter Score calculado apenas com base nos feedbacks dos clientes que este atendente atendeu. √â a m√©trica de qualidade mais importante para ele.
Gr√°fico de Evolu√ß√£o do Sentimento: Um gr√°fico que mostra, ao longo do tempo, como o atendente est√° impactando o sentimento dos clientes. Idealmente, a linha de "Sentimento Positivo" deve estar subindo.
3. Adapta√ß√£o das P√°ginas Existentes para o Atendente
A experi√™ncia do atendente ser√° moldada n√£o apenas pelo novo dashboard, mas tamb√©m pela forma como as outras p√°ginas s√£o filtradas para ele.
Menu de Navega√ß√£o (Sidebar)
O menu lateral ser√° renderizado condicionalmente com base no papel do usu√°rio.
Para o Atendente, o menu seria:
[‚úÖ] Dashboard (Leva para o seu dashboard pessoal)
[‚úÖ] Conversas (Leva para a lista de conversas atribu√≠das a ele)
[‚úÖ] M√©tricas (Leva para a p√°gina de NPS filtrada para ele)
[‚ùå] Monitor Supervisor (Oculto)
[‚ùå] Monitor Webhook (Oculto)
[‚ùå] Test Chat (Oculto)
[‚ùå] Base de Conhecimento (Oculto)
[‚ùå] Evolu√ß√£o dos Agentes (Oculto)
[‚ùå] Assistentes (Oculto)
[‚ùå] Configura√ß√µes (Oculto)
P√°gina "Conversas"
Vis√£o do Supervisor: V√™ todas as conversas e pode filtrar por atendente, status, etc.
Vis√£o do Atendente: A p√°gina carrega, por padr√£o, uma lista de conversas onde o filtro atribu√≠do_a: "ID_do_atendente_logado" j√° est√° aplicado. Ele n√£o pode remover este filtro para ver as conversas de outros.
P√°gina "M√©tricas de Satisfa√ß√£o"
Vis√£o do Supervisor: V√™ os dados globais de NPS de toda a opera√ß√£o (como na sua imagem).
Vis√£o do Atendente: A p√°gina √© a mesma visualmente, mas todos os dados (NPS Score, Score M√©dio, Distribui√ß√£o, Coment√°rios) s√£o calculados apenas com base nos feedbacks dos atendimentos que ele realizou. A API do backend precisa suportar essa filtragem.
4. Plano de Implementa√ß√£o T√©cnica (Backend e Frontend)
Para implementar o RBAC, as mudan√ßas precisam acontecer em ambas as camadas da aplica√ß√£o.
Backend
Atualizar o Modelo de Usu√°rio: Adicionar um campo role ao schema do usu√°rio no banco de dados. Ex: role: Enum("ADMIN", "AGENT").
Middleware de Autoriza√ß√£o: Criar um middleware para proteger as rotas da API. Ele ir√°:
Verificar o token de autentica√ß√£o (JWT) para obter o userId e o role do usu√°rio.
Bloquear o acesso a rotas de admin (ex: /api/assistants/config) se o role n√£o for ADMIN, retornando um erro 403 Forbidden.
Modificar Endpoints de Dados: Os endpoints que servem dados para as p√°ginas compartilhadas precisam ser atualizados para aceitar um filtro opcional.
GET /api/conversations: Se o usu√°rio for AGENT, o endpoint deve aplicar um filtro WHERE assignedTo = userId automaticamente.
GET /api/metrics/nps: Deve aceitar um par√¢metro opcional, ex: ?userId=.... Se o usu√°rio logado for AGENT, o frontend deve enviar a requisi√ß√£o com seu pr√≥prio ID (GET /api/metrics/nps?userId=123), e o backend retorna os dados filtrados. Se for ADMIN, o frontend n√£o envia o par√¢metro e o backend retorna os dados globais.
Frontend
Gerenciamento de Estado Global: Ap√≥s o login, as informa√ß√µes do usu√°rio, incluindo seu role, devem ser armazenadas em um estado global (Context API, Redux, etc.).
Renderiza√ß√£o Condicional:
Menu Lateral: Envolver os itens de menu em uma condi√ß√£o que verifica if (user.role === 'ADMIN').
Dashboard: Na rota principal (/dashboard), renderizar <AdminDashboard /> ou <AgentDashboard /> com base no user.role.
Chamadas de API Condicionais: Na p√°gina de M√©tricas, a chamada √† API deve ser constru√≠da dinamicamente:
code
JavaScript
let apiUrl = '/api/metrics/nps';
if (user.role === 'AGENT') {
  apiUrl += `?userId=${user.id}`;
}
fetch(apiUrl);